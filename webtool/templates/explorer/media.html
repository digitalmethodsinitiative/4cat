<div class="media-container">

    <!-- Image files -->
    {% if file_ext in ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff', 'ico', 'heic', 'heif'] %}
        <div class="media-item image-item">
            <img src="{{ url_for('dataset.show_archive_file', key=dataset_key, filename=filename) }}"
                 alt="{{ filename }}"
                 class="media-image"
                 {#loading="lazy"#}
            >
        </div>

    <!-- Video files -->
    {% elif file_ext in ['mp4', 'avi', 'mov', 'wmv', 'flv', 'webm', 'mkv', 'm4v'] %}
        <div class="media-item video-item">
            {% set file_data = item.original %}
            <video controls class="media-video" preload="metadata">
                <source src="{{ url_for('dataset.show_archive_file', key=dataset_key, filename=filename) }}"
                        type="video/{{ file_ext }}">
                Your browser does not support the video tag.
            </video>
        </div>

    <!-- Audio files -->
    {% elif file_ext in ['mp3', 'wav', 'ogg', 'flac', 'aac', 'm4a', 'wma'] %}
        <div class="media-item audio-item">
            {% set file_data = item.original %}
            <audio controls class="media-audio" preload="metadata">
                <source src="{{ url_for('dataset.show_archive_file', key=dataset_key, filename=filename) }}"
                        type="audio/{{ file_ext }}">
                Your browser does not support the audio tag.
            </audio>
        </div>

    <!-- Other/Unknown file types -->
    {% else %}
        <div class="media-item unknown-item">
            <div class="file-icon">
                <i class="fa fa-file-o fa-3x"></i>
            </div>
            <div class="media-info">
                <span class="media-type">
                    <i class="fa fa-file"></i> {{ file_ext.upper() if file_ext else 'Unknown' }} File
                </span>
                {% if "file_size" in item %}
                    <span class="file-size">
                        {{ item["file_size"] | filesizeformat }}
                    </span>
                {% endif %}
            </div>
        </div>
    {% endif %}

</div>
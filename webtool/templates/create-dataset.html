{% extends "layout.html" %}

{% block title %}Create query{% endblock %}
{% block body_class %}plain-page frontpage {% endblock %}

{% block body %}
    <article class="with-aside">
        <section>
            <div>
                <h2><span>Create new dataset</span></h2>
            </div>

            <form id="query-form" action="/api/queue-query/" method="POST">
                <fieldset class="datasource-form">
                    <p>Please be conservative; 4CAT is a shared resource and large dataset queries may prevent others
                        from using it. We recommend to start with smaller date ranges and specific queries and then cast
                        a wider net if needed.</p>
                    <div class="form-element">
                        <label for="datasource-select">Data source:</label>
                        <div>
                            <select name="datasource" id="datasource-select">
                                {% for datasource in datasources %}
                                    <option value="{{ datasource }}">{{ datasources[datasource].name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </fieldset>

                <div id="datasource-form">
                    Loading query form for chosen datasource...
                </div>

                <div class="submit-container">
                    <button>Create dataset</button>
                </div>
            </form>
        </section>

        <aside>
            <div>
                <h2 id="query-status-header"><span>Dataset status</span></h2>
                <p id="query-status">
                    <span class="message">Waiting for input...</span><span class="dots"></span>
                </p>

                <h2><span>Results</span></h2>
                <ol id="query-results">
                </ol>
            </div>
        </aside>
    </article>
{% endblock %}